"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[998],{5998:function(e,r,n){n.r(r);var a=n(1413),t=n(9439),l=n(2791),u=n(7022),s=n(9743),c=n(3855),o=n(2677),d=n(3360),i=n(1427),m=n(1243),x=n(2073),h=n(6868),b=n(9230),v=n(5691),Z=n(184),p=0;r.default=function(){function e(){var e=new Date(de),r=new Date(e.setDate(e.getDate()+7*(H-1)));return new Date(r).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")}var r=(0,l.useState)(!1),n=(0,t.Z)(r,2),j=n[0],f=n[1],y=(0,l.useState)(""),g=(0,t.Z)(y,2),N=g[0],w=g[1],C=(0,b.$G)(),L=C.t,k=(C.i18n,(0,l.useState)(!1)),G=(0,t.Z)(k,2),S=G[0],q=G[1],R=(0,l.useState)([]),D=(0,t.Z)(R,2),_=D[0],z=D[1],E=(0,l.useState)([]),K=(0,t.Z)(E,2),F=K[0],J=K[1],V=(0,l.useState)(),B=(0,t.Z)(V,2),O=B[0],P=B[1],T=(0,l.useState)(25),A=(0,t.Z)(T,2),H=A[0],I=A[1],M=(0,l.useState)(""),U=(0,t.Z)(M,2),W=U[0],$=U[1],Q=(0,l.useState)([]),X=(0,t.Z)(Q,2),Y=X[0],ee=X[1],re=(0,l.useRef)(null),ne=(0,l.useRef)(null),ae=(0,l.useRef)(null),te=(0,l.useRef)(null),le=(0,l.useRef)(null),ue=(0,l.useRef)(null),se=(0,l.useRef)(null),ce=(0,l.useState)((0,h.zJ)()),oe=(0,t.Z)(ce,2),de=oe[0],ie=oe[1],me=(0,l.useRef)(null),xe=(0,l.useRef)(null),he=(0,l.useRef)(null),be=(0,l.useRef)(null),ve=(0,l.useRef)(null),Ze=(0,l.useRef)(null),pe={mySelectKey:null},je=(0,l.useState)(pe),fe=(0,t.Z)(je,2),ye=fe[0],ge=fe[1],Ne=(0,l.useRef)(null),we=(0,l.useRef)(null),Ce=(0,l.useRef)(null),Le=(0,l.useRef)(null),ke=(0,l.useRef)(null),Ge=(0,l.useRef)(null),Se=(0,l.useRef)(null),qe=(0,l.useRef)(null),Re=(0,l.useState)(!1),De=(0,t.Z)(Re,2),_e=De[0],ze=De[1],Ee=(0,l.useState)(!1),Ke=(0,t.Z)(Ee,2),Fe=Ke[0],Je=Ke[1],Ve=(0,l.useState)(!1),Be=(0,t.Z)(Ve,2),Oe=Be[0],Pe=Be[1];(0,l.useEffect)((function(){q(!0),m.Z.get("".concat(x.v,"/get/view")).then((function(e){z(e.data),q(!1)})).catch((function(e){console.log("error=",e),w(L("errormessagecustomer")),q(!1)}))}),[]),(0,l.useEffect)((function(){q(!0),m.Z.get("".concat(x.v,"/linemancreate/get")).then((function(e){J(e.data),q(!1)})).catch((function(e){console.log("error=",e),w(L("errormessagelineman")),q(!1)}))}),[]),(0,l.useEffect)((function(){q(!0),m.Z.get("".concat(x.v,"/loancreate/get/max")).then((function(e){var r=e.data;q(!1),p=r.length>0?r[0].maxCode+1:1,Se.current.value=p})).catch((function(e){console.log("error=",e),w(L("errormessageloannumber")),q(!1)}))}),[Fe]),(0,l.useEffect)((function(){q(!0),m.Z.get("".concat(x.v,"/linemancreate/get/lines")).then((function(e){ee(e.data),q(!1)})).catch((function(e){console.log("error=",e),w(L("errormessageline")),q(!1)}))}),[]),(0,l.useEffect)((function(){document.addEventListener("keydown",(function(e){if("Enter"===e.key&&"INPUT"===e.target.nodeName){var r=e.target.form,n=Array.prototype.indexOf.call(r,e.target);r.elements[n+1].focus(),e.preventDefault()}}))}),[]);var Te=function(e){return!1===e.currentTarget.checkValidity()&&e.stopPropagation(),ze(!0),0===Number(le.current.value)?(alert(L("paidamountvaluezeroalert")),!1):Number(le.current.value)>Number(te.current.value)?(alert(L("paidamountgreaterthanloanalert")),!1):(""!==ye.mySelectKey&&""!==Ne.current.value&&""!==we.current.value&&Le.current.value,void(""!==Ce.current.value&&""!==Ce.current.value&""!==H&&""!==W&&0!==W&&0!==le.current.value&&""!=le.current.value&&Number(le.current.value)==Number(te.current.value)&&(j?window.confirm(L("yesornoalertmessage"))&&Ae():He())))},Ae=function(){Pe(!0),m.Z.put("".concat(x.v,"/loancreate/update"),{newloanno:Number(Se.current.value),oldloanno:Number(qe.current.value)}).then((function(e){Pe(!1),Ie()})).catch((function(e){console.log("error=",e),w(L("errormessageupdateloan")),q(!1),Pe(!1)})),alert(L("updatealertmessage"))},He=function(){Pe(!0),m.Z.post("".concat(x.v,"/loancreate/save"),{loanno:Number(Se.current.value),customer_id:ye.mySelectKey,lineman_id:Ne.current.value,city_id:be.current.value,weekno:we.current.value,bookno:Le.current.value,lineno:Ce.current.value,document:ke.current.value,cheque:Ge.current.value,weekcount:H,startdate:new Date(de),givendate:new Date(ue.current.value),duedate:new Date(se.current.value),finisheddate:new Date(me.current.value),givenamount:Number(W),documentamount:Number(re.current.value),interestamount:Number(ne.current.value),totalamount:Number(ae.current.value),dueamount:Number(te.current.value),paidamount:Number(le.current.value)}).then((function(e){Pe(!1),Ie()})).catch((function(e){console.log("error=",e),w(L("errormessagesaveloan")),q(!1),Pe(!1)})),alert(L("savealertmessage"))};function Ie(){ge(pe),Ne.current.value="",P(""),xe.current.value="",he.current.value="",be.current.value="",ve.current.value="",Ze.current.value="",Ce.current.value="",we.current.value="",Le.current.value="",ke.current.value="",Ge.current.value="",ie((0,h.zJ)()),ue.current.value=(0,h.zJ)(),$(""),re.current.value="",ne.current.value="",ae.current.value="",te.current.value="",le.current.value="",qe.current.value="",f(!1),Je((function(e){return!e}))}var Me=_.map((function(e,r){return{label:e.customer+"-"+e.fathername,value:e._id,key:r}}));return(0,Z.jsx)(u.Z,{className:"rounded bg-white mt-5",children:(0,Z.jsx)(s.Z,{className:"justify-content-md-center mt-5 ",children:(0,Z.jsxs)(c.Z,{noValidate:!0,validated:_e,onSubmit:Te,children:[(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("loanno")})," ",(0,Z.jsx)(c.Z.Control,{ref:Se,type:"number",required:!0})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("oldno")}),(0,Z.jsx)(c.Z.Control,{ref:qe,type:"number",placeholder:L("oldno"),onBlur:function(){""!=qe.current.value&&m.Z.get("".concat(x.v,"/loancreate/get/oldLoanRef"),{params:{loanno:Number(qe.current.value)}}).then((function(e){var r=e.data;ge((0,a.Z)((0,a.Z)({},ye),{},{mySelectKey:r[0].customer_id})),Ne.current.value=r[0].lineman_id,P(r[0].mobileno),xe.current.value=r[0].fathername,he.current.value=r[0].cityname,be.current.value=r[0].city,ve.current.value=r[0].address,Ze.current.value=r[0].work,Ce.current.value=r[0].lineno,we.current.value=r[0].weekno,Le.current.value=r[0].bookno,ke.current.value=r[0].document,Ge.current.value=r[0].cheque,$(r[0].givenamount),re.current.value=r[0].documentamount,ne.current.value=r[0].interestamount,ae.current.value=r[0].totalamount,te.current.value=r[0].dueamount,le.current.value=r[0].paidamount,f(!0)}))}})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"customername",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("customer")}),(0,Z.jsx)(i.ZP,{"aria-label":"Default select example",required:!0,autoFocus:!0,value:Me.filter((function(e){return e.value===ye.mySelectKey})),getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},onChange:function(e){return function(e){ge((0,a.Z)((0,a.Z)({},ye),{},{mySelectKey:e}));var r=_.filter((function(r){return r._id===e}));0==ye.mySelectKey?(P(""),xe.current.value="",he.current.value="",be.current.value="",ve.current.value="",Ze.current.value="",Ce.current.value=0):(P(r[0].mobileno),xe.current.value=r[0].fathername,he.current.value=r[0].cityname,be.current.value=r[0].city_id,ve.current.value=r[0].address,Ze.current.value=r[0].work,Ce.current.value=r[0].lineno)}(e.value)},options:Me,placeholder:L("customer")})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"linemanname",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("lineman")}),(0,Z.jsxs)(c.Z.Select,{"aria-label":"Default select example",ref:Ne,required:!0,children:[(0,Z.jsx)("option",{value:"",children:L("linemanplaceholder")}),F.map((function(e){return(0,Z.jsx)("option",{value:e._id,children:e.linemanname})}))]})]})})]}),(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"mobilenumber",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("phoneno")})," ",(0,Z.jsx)(c.Z.Control,{type:"number",disabled:!0,value:O,onChange:function(e){return P(e.target.value)}})]})}),(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"fathername",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("fathername")}),(0,Z.jsx)(c.Z.Control,{ref:xe,type:"text",disabled:!0})]})}),(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"cityname",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("city")})," ",(0,Z.jsx)(c.Z.Control,{ref:he,type:"text",disabled:!0})]})}),(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"d-none",name:"cityname",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("city")})," ",(0,Z.jsx)(c.Z.Control,{ref:be,type:"text"})]})})]}),(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"address1",border:"primary",children:[(0,Z.jsxs)(c.Z.Label,{children:[L("address")," "]}),(0,Z.jsx)(c.Z.Control,{ref:ve,type:"text",disabled:!0})]})}),(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"work",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("work")}),(0,Z.jsx)(c.Z.Control,{ref:Ze,type:"text",disabled:!0})]})}),(0,Z.jsx)(o.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"lineno",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("line")}),(0,Z.jsxs)(c.Z.Select,{"aria-label":"Default select example",ref:Ce,required:!0,children:[(0,Z.jsx)("option",{value:"",children:L("citylineplaceholder")}),Y.map((function(e){return(0,Z.jsx)("option",{value:e.lineno,children:e.linename})}))]})]})})]}),(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"weekno",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("weekno")}),(0,Z.jsx)(c.Z.Control,{type:"number",placeholder:L("weeknoplaceholder"),required:!0,ref:we})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"bookno",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("bookno")}),(0,Z.jsx)(c.Z.Control,{type:"number",placeholder:L("booknoplaceholder"),required:!0,ref:Le})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"doument",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("document")}),(0,Z.jsx)(c.Z.Control,{type:"text",placeholder:L("document"),ref:ke})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"cheque",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("cheque")}),(0,Z.jsx)(c.Z.Control,{type:"number",placeholder:L("cheque"),ref:Ge})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"bookno",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("week")}),(0,Z.jsx)(c.Z.Control,{className:"bg-info text-center",size:"lg",type:"number",placeholder:"How Many Weeks",required:!0,value:H,onChange:function(e){return I(e.target.value)}})]})})]}),(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"startdate",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("startdatedetail")}),(0,Z.jsx)(c.Z.Control,{type:"date",required:!0,value:de,onChange:function(e){return ie(e.target.value)},onBlur:e})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"givendate",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("givendatedetail")}),(0,Z.jsx)(c.Z.Control,{type:"date",ref:ue,required:!0,defaultValue:(0,h.zJ)()})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"givendate",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("payingdate")}),(0,Z.jsx)(c.Z.Control,{type:"date",ref:se,required:!0,defaultValue:(0,h.zJ)()})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("enddatedetail")}),(0,Z.jsx)(c.Z.Control,{type:"date",ref:me,required:!0,value:e()})]})})]}),(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"givenmoney",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("givenamountdetail")}),(0,Z.jsx)(c.Z.Control,{className:"text-end",type:"number",value:W,required:!0,onChange:function(e){return $(Number(e.target.value))},onBlur:function(){var e=Number(W),r=0;25==H?r=50*e/1e3:32==H?r=40*e/1e3:12==H?r=100*e/1e3:42!=H&&43!=H||(r=30*e/1e3),re.current.value=r.toFixed(2);var n=0;25==H?n=20*e/100:32==H?n=24*e/100:42==H?n=23*e/100:12==H?n=10*e/100:43==H&&(n=26*e/100),ne.current.value=n.toFixed(2);var a=e+r+n;ae.current.value=a.toFixed(2);var t=a/H;te.current.value=t.toFixed(2),$(e.toFixed(2))}})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"documentcharge",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("documentchargedetail")}),(0,Z.jsx)(c.Z.Control,{ref:re,className:"text-end",type:"text",required:!0})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"interest",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("interest")}),(0,Z.jsx)(c.Z.Control,{className:"text-end",type:"text",required:!0,ref:ne})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"totalamount",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("total")}),(0,Z.jsx)(c.Z.Control,{className:"text-end",type:"text",required:!0,ref:ae})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"dueamount",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("due")}),(0,Z.jsx)(c.Z.Control,{className:"text-end",type:"text",required:!0,ref:te})]})}),(0,Z.jsx)(o.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,Z.jsxs)(c.Z.Group,{className:"mb-3",name:"paidamount",border:"primary",children:[(0,Z.jsx)(c.Z.Label,{children:L("paidamountdetail")}),(0,Z.jsx)(c.Z.Control,{className:"text-end",type:"text",required:!0,ref:le})]})})]}),(0,Z.jsx)(s.Z,{children:(0,Z.jsxs)("div",{className:"col-md-12 text-center mb-2 ",children:[(0,Z.jsx)(d.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:Te,disabled:Oe,children:L(j?"updatebutton":"savebutton")})," ",(0,Z.jsx)(d.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:Ie,children:L("newbutton")})]})}),(0,Z.jsxs)(s.Z,{children:[S?(0,Z.jsx)(v.Z,{}):null,N&&(0,Z.jsx)("div",{className:"error",children:N})]})]})})})}}}]);
//# sourceMappingURL=998.6085eebc.chunk.js.map