"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[998],{5998:function(e,r,n){n.r(r);var a=n(9439),t=n(2791),l=n(7022),u=n(9743),s=n(3855),c=n(2677),o=n(3360),d=n(1243),i=n(2073),m=n(6868),x=n(9230),h=n(5691),b=n(184),v=0;r.default=function(){function e(){var e=new Date(ce),r=new Date(e.setDate(e.getDate()+7*(H-1)));return new Date(r).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")}var r=(0,t.useState)(!1),n=(0,a.Z)(r,2),Z=n[0],p=n[1],j=(0,t.useState)(""),f=(0,a.Z)(j,2),g=f[0],N=f[1],y=(0,x.$G)(),w=y.t,C=(y.i18n,(0,t.useState)(!1)),L=(0,a.Z)(C,2),G=L[0],k=L[1],R=(0,t.useState)([]),q=(0,a.Z)(R,2),S=q[0],D=q[1],_=(0,t.useState)([]),z=(0,a.Z)(_,2),E=z[0],F=z[1],J=(0,t.useState)(),B=(0,a.Z)(J,2),V=B[0],P=B[1],T=(0,t.useState)(25),A=(0,a.Z)(T,2),H=A[0],I=A[1],M=(0,t.useState)(""),O=(0,a.Z)(M,2),U=O[0],W=O[1],$=(0,t.useState)([]),K=(0,a.Z)($,2),Q=K[0],X=K[1],Y=(0,t.useRef)(null),ee=(0,t.useRef)(null),re=(0,t.useRef)(null),ne=(0,t.useRef)(null),ae=(0,t.useRef)(null),te=(0,t.useRef)(null),le=(0,t.useRef)(null),ue=(0,t.useState)((0,m.zJ)()),se=(0,a.Z)(ue,2),ce=se[0],oe=se[1],de=(0,t.useRef)(null),ie=(0,t.useRef)(null),me=(0,t.useRef)(null),xe=(0,t.useRef)(null),he=(0,t.useRef)(null),be=(0,t.useRef)(null),ve=(0,t.useRef)(null),Ze=(0,t.useRef)(null),pe=(0,t.useRef)(null),je=(0,t.useRef)(null),fe=(0,t.useRef)(null),ge=(0,t.useRef)(null),Ne=(0,t.useRef)(null),ye=(0,t.useRef)(null),we=(0,t.useRef)(null),Ce=(0,t.useState)(!1),Le=(0,a.Z)(Ce,2),Ge=Le[0],ke=Le[1],Re=(0,t.useState)(!1),qe=(0,a.Z)(Re,2),Se=qe[0],De=qe[1];(0,t.useEffect)((function(){k(!0),d.Z.get("".concat(i.v,"/get/view")).then((function(e){D(e.data),k(!1)})).catch((function(e){console.log("error=",e),N(w("errormessagecustomer")),k(!1)}))}),[]),(0,t.useEffect)((function(){k(!0),d.Z.get("".concat(i.v,"/linemancreate/get")).then((function(e){F(e.data),k(!1)})).catch((function(e){console.log("error=",e),N(w("errormessagelineman")),k(!1)}))}),[]),(0,t.useEffect)((function(){k(!0),d.Z.get("".concat(i.v,"/loancreate/get/max")).then((function(e){var r=e.data;k(!1),v=r.length>0?r[0].maxCode+1:1,ye.current.value=v})).catch((function(e){console.log("error=",e),N(w("errormessageloannumber")),k(!1)}))}),[Se]),(0,t.useEffect)((function(){k(!0),d.Z.get("".concat(i.v,"/linemancreate/get/lines")).then((function(e){X(e.data),k(!1)})).catch((function(e){console.log("error=",e),N(w("errormessageline")),k(!1)}))}),[]),(0,t.useEffect)((function(){document.addEventListener("keydown",(function(e){if("Enter"===e.key&&"INPUT"===e.target.nodeName){var r=e.target.form,n=Array.prototype.indexOf.call(r,e.target);r.elements[n+1].focus(),e.preventDefault()}}))}),[]);var _e=function(e){return!1===e.currentTarget.checkValidity()&&e.stopPropagation(),ke(!0),0===Number(ae.current.value)?(alert(w("paidamountvaluezeroalert")),!1):Number(ae.current.value)>Number(ne.current.value)?(alert(w("paidamountgreaterthanloanalert")),!1):(""!==ve.current.value&&""!==Ze.current.value&&""!==pe.current.value&&fe.current.value,void(""!==je.current.value&&""!==je.current.value&""!==H&&""!==U&&0!==U&&0!==ae.current.value&&""!=ae.current.value&&Number(ae.current.value)==Number(ne.current.value)&&(Z?window.confirm(w("yesornoalertmessage"))&&ze():Ee())))},ze=function(){d.Z.put("".concat(i.v,"/loancreate/update"),{newloanno:Number(ye.current.value),oldloanno:Number(we.current.value)}).then((function(e){Fe()})).catch((function(e){console.log("error=",e),N(w("errormessageupdateloan")),k(!1)})),alert(w("updatealertmessage"))},Ee=function(){d.Z.post("".concat(i.v,"/loancreate/save"),{loanno:Number(ye.current.value),customer_id:ve.current.value,lineman_id:Ze.current.value,city_id:xe.current.value,weekno:pe.current.value,bookno:fe.current.value,lineno:je.current.value,document:ge.current.value,cheque:Ne.current.value,weekcount:H,startdate:new Date(ce),givendate:new Date(te.current.value),duedate:new Date(le.current.value),finisheddate:new Date(de.current.value),givenamount:Number(U),documentamount:Number(Y.current.value),interestamount:Number(ee.current.value),totalamount:Number(re.current.value),dueamount:Number(ne.current.value),paidamount:Number(ae.current.value)}).then((function(e){Fe()})).catch((function(e){console.log("error=",e),N(w("errormessagesaveloan")),k(!1)})),alert(w("savealertmessage"))};function Fe(){ve.current.value="",Ze.current.value="",P(""),ie.current.value="",me.current.value="",xe.current.value="",he.current.value="",be.current.value="",je.current.value="",pe.current.value="",fe.current.value="",ge.current.value="",Ne.current.value="",oe((0,m.zJ)()),te.current.value=(0,m.zJ)(),W(""),Y.current.value="",ee.current.value="",re.current.value="",ne.current.value="",ae.current.value="",we.current.value="",p(!1),De((function(e){return!e}))}return(0,b.jsx)(l.Z,{className:"rounded bg-white mt-5",children:(0,b.jsx)(u.Z,{className:"justify-content-md-center mt-5 ",children:(0,b.jsxs)(s.Z,{noValidate:!0,validated:Ge,onSubmit:_e,children:[(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("loanno")})," ",(0,b.jsx)(s.Z.Control,{ref:ye,type:"number",required:!0})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("oldno")}),(0,b.jsx)(s.Z.Control,{ref:we,type:"number",placeholder:w("oldno"),onBlur:function(){""!=we.current.value&&d.Z.get("".concat(i.v,"/loancreate/get/oldLoanRef"),{params:{loanno:Number(we.current.value)}}).then((function(e){var r=e.data;ve.current.value=r[0].customer_id,Ze.current.value=r[0].lineman_id,P(r[0].mobileno),ie.current.value=r[0].fathername,me.current.value=r[0].cityname,xe.current.value=r[0].city,he.current.value=r[0].address,be.current.value=r[0].work,je.current.value=r[0].lineno,pe.current.value=r[0].weekno,fe.current.value=r[0].bookno,ge.current.value=r[0].document,Ne.current.value=r[0].cheque,W(r[0].givenamount),Y.current.value=r[0].documentamount,ee.current.value=r[0].interestamount,re.current.value=r[0].totalamount,ne.current.value=r[0].dueamount,ae.current.value=r[0].paidamount,p(!0)}))}})]})}),(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"customername",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("customer")}),(0,b.jsxs)(s.Z.Select,{"aria-label":"Default select example",ref:ve,onChange:function(e){return function(e){var r=S.filter((function(r){return r._id===e.target.value}));0==ve.current.value?(P(""),ie.current.value="",me.current.value="",xe.current.value="",he.current.value="",be.current.value="",je.current.value=0):(P(r[0].mobileno),ie.current.value=r[0].fathername,me.current.value=r[0].cityname,xe.current.value=r[0].city_id,he.current.value=r[0].address,be.current.value=r[0].work,je.current.value=r[0].lineno)}(e)},required:!0,autoFocus:!0,children:[(0,b.jsx)("option",{value:"",children:w("customerplaceholder")}),S.map((function(e,r){return(0,b.jsx)("option",{value:e._id,children:e.customer})}))]})]})}),(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"linemanname",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("lineman")}),(0,b.jsxs)(s.Z.Select,{"aria-label":"Default select example",ref:Ze,required:!0,children:[(0,b.jsx)("option",{value:"",children:w("linemanplaceholder")}),E.map((function(e){return(0,b.jsx)("option",{value:e._id,children:e.linemanname})}))]})]})})]}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"mobilenumber",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("phoneno")})," ",(0,b.jsx)(s.Z.Control,{type:"number",disabled:!0,value:V,onChange:function(e){return P(e.target.value)}})]})}),(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"fathername",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("fathername")}),(0,b.jsx)(s.Z.Control,{ref:ie,type:"text",disabled:!0})]})}),(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"cityname",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("city")})," ",(0,b.jsx)(s.Z.Control,{ref:me,type:"text",disabled:!0})]})}),(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"d-none",name:"cityname",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("city")})," ",(0,b.jsx)(s.Z.Control,{ref:xe,type:"text"})]})})]}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"address1",border:"primary",children:[(0,b.jsxs)(s.Z.Label,{children:[w("address")," "]}),(0,b.jsx)(s.Z.Control,{ref:he,type:"text",disabled:!0})]})}),(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"work",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("work")}),(0,b.jsx)(s.Z.Control,{ref:be,type:"text",disabled:!0})]})}),(0,b.jsx)(c.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"lineno",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("line")}),(0,b.jsxs)(s.Z.Select,{"aria-label":"Default select example",ref:je,required:!0,children:[(0,b.jsx)("option",{value:"",children:w("citylineplaceholder")}),Q.map((function(e){return(0,b.jsx)("option",{value:e.lineno,children:e.linename})}))]})]})})]}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"weekno",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("weekno")}),(0,b.jsx)(s.Z.Control,{type:"number",placeholder:w("weeknoplaceholder"),required:!0,ref:pe})]})}),(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"bookno",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("bookno")}),(0,b.jsx)(s.Z.Control,{type:"number",placeholder:w("booknoplaceholder"),required:!0,ref:fe})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"doument",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("document")}),(0,b.jsx)(s.Z.Control,{type:"text",placeholder:w("document"),ref:ge})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"cheque",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("cheque")}),(0,b.jsx)(s.Z.Control,{type:"number",placeholder:w("cheque"),ref:Ne})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"bookno",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("week")}),(0,b.jsx)(s.Z.Control,{className:"bg-info text-center",size:"lg",type:"number",placeholder:"How Many Weeks",required:!0,value:H,onChange:function(e){return I(e.target.value)}})]})})]}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"startdate",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("startdatedetail")}),(0,b.jsx)(s.Z.Control,{type:"date",required:!0,value:ce,onChange:function(e){return oe(e.target.value)},onBlur:e})]})}),(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"givendate",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("givendatedetail")}),(0,b.jsx)(s.Z.Control,{type:"date",ref:te,required:!0,defaultValue:(0,m.zJ)()})]})}),(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"givendate",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("payingdate")}),(0,b.jsx)(s.Z.Control,{type:"date",ref:le,required:!0,defaultValue:(0,m.zJ)()})]})}),(0,b.jsx)(c.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("enddatedetail")}),(0,b.jsx)(s.Z.Control,{type:"date",ref:de,required:!0,value:e()})]})})]}),(0,b.jsxs)(u.Z,{children:[(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"givenmoney",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("givenamountdetail")}),(0,b.jsx)(s.Z.Control,{className:"text-end",type:"number",value:U,required:!0,onChange:function(e){return W(Number(e.target.value))},onBlur:function(){var e=Number(U),r=0;25==H?r=50*e/1e3:32==H?r=40*e/1e3:12==H?r=100*e/1e3:42!=H&&43!=H||(r=30*e/1e3),Y.current.value=r.toFixed(2);var n=0;25==H?n=20*e/100:32==H?n=24*e/100:42==H?n=23*e/100:12==H?n=10*e/100:43==H&&(n=26*e/100),ee.current.value=n.toFixed(2);var a=e+r+n;re.current.value=a.toFixed(2);var t=a/H;ne.current.value=t.toFixed(2),W(e.toFixed(2))}})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"documentcharge",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("documentchargedetail")}),(0,b.jsx)(s.Z.Control,{ref:Y,className:"text-end",type:"text",required:!0})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"interest",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("interest")}),(0,b.jsx)(s.Z.Control,{className:"text-end",type:"text",required:!0,ref:ee})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"totalamount",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("total")}),(0,b.jsx)(s.Z.Control,{className:"text-end",type:"text",required:!0,ref:re})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"dueamount",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("due")}),(0,b.jsx)(s.Z.Control,{className:"text-end",type:"text",required:!0,ref:ne})]})}),(0,b.jsx)(c.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,b.jsxs)(s.Z.Group,{className:"mb-3",name:"paidamount",border:"primary",children:[(0,b.jsx)(s.Z.Label,{children:w("paidamountdetail")}),(0,b.jsx)(s.Z.Control,{className:"text-end",type:"text",required:!0,ref:ae})]})})]}),(0,b.jsx)(u.Z,{children:(0,b.jsxs)("div",{className:"col-md-12 text-center mb-2 ",children:[(0,b.jsx)(o.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:_e,children:w(Z?"updatebutton":"savebutton")})," ",(0,b.jsx)(o.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:Fe,children:w("newbutton")})]})}),(0,b.jsxs)(u.Z,{children:[G?(0,b.jsx)(h.Z,{}):null,g&&(0,b.jsx)("div",{className:"error",children:g})]})]})})})}}}]);
//# sourceMappingURL=998.30b13cd1.chunk.js.map