"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[998],{5998:function(e,r,n){n.r(r);var a=n(4165),t=n(5861),l=n(1413),u=n(9439),s=n(2791),c=n(7022),o=n(9743),i=n(3855),d=n(2677),m=n(3360),h=n(1427),x=n(1243),b=n(2073),v=n(6868),Z=n(9230),p=n(5691),f=n(184),j=0;r.default=function(){function e(){var e=new Date(me),r=new Date(e.setDate(e.getDate()+7*(M-1)));return new Date(r).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")}var r=(0,s.useState)(!1),n=(0,u.Z)(r,2),g=n[0],y=n[1],N=(0,s.useState)(""),w=(0,u.Z)(N,2),C=w[0],k=w[1],L=(0,Z.$G)(),G=L.t,S=(L.i18n,(0,s.useState)(!1)),q=(0,u.Z)(S,2),R=q[0],D=q[1],_=(0,s.useState)([]),z=(0,u.Z)(_,2),K=z[0],E=z[1],F=(0,s.useState)([]),J=(0,u.Z)(F,2),V=J[0],B=J[1],O=(0,s.useState)(),P=(0,u.Z)(O,2),T=P[0],A=P[1],H=(0,s.useState)(25),I=(0,u.Z)(H,2),M=I[0],U=I[1],W=(0,s.useState)(""),$=(0,u.Z)(W,2),Q=$[0],X=$[1],Y=(0,s.useState)([]),ee=(0,u.Z)(Y,2),re=ee[0],ne=ee[1],ae=(0,s.useRef)(null),te=(0,s.useRef)(null),le=(0,s.useRef)(null),ue=(0,s.useRef)(null),se=(0,s.useRef)(null),ce=(0,s.useRef)(null),oe=(0,s.useRef)(null),ie=(0,s.useState)((0,v.zJ)()),de=(0,u.Z)(ie,2),me=de[0],he=de[1],xe=(0,s.useRef)(null),be=(0,s.useRef)(null),ve=(0,s.useRef)(null),Ze=(0,s.useRef)(null),pe=(0,s.useRef)(null),fe=(0,s.useRef)(null),je={mySelectKey:null},ge=(0,s.useState)(je),ye=(0,u.Z)(ge,2),Ne=ye[0],we=ye[1],Ce=(0,s.useRef)(null),ke=(0,s.useRef)(null),Le=(0,s.useRef)(null),Ge=(0,s.useRef)(null),Se=(0,s.useRef)(null),qe=(0,s.useRef)(null),Re=(0,s.useRef)(null),De=(0,s.useRef)(null),_e=(0,s.useState)(!1),ze=(0,u.Z)(_e,2),Ke=ze[0],Ee=ze[1],Fe=(0,s.useState)(!1),Je=(0,u.Z)(Fe,2),Ve=Je[0],Be=Je[1],Oe=(0,s.useState)(!1),Pe=(0,u.Z)(Oe,2),Te=Pe[0],Ae=Pe[1],He=(0,s.useState)(!1),Ie=(0,u.Z)(He,2),Me=Ie[0],Ue=Ie[1];(0,s.useEffect)((function(){D(!0),x.Z.get("".concat(b.v,"/get/view")).then((function(e){E(e.data),D(!1)})).catch((function(e){console.log("error=",e),k(G("errormessagecustomer")),D(!1)}))}),[]),(0,s.useEffect)((function(){D(!0),x.Z.get("".concat(b.v,"/linemancreate/get")).then((function(e){B(e.data),D(!1)})).catch((function(e){console.log("error=",e),k(G("errormessagelineman")),D(!1)}))}),[]),(0,s.useEffect)((function(){D(!0),x.Z.get("".concat(b.v,"/loancreate/get/max")).then((function(e){var r=e.data;D(!1),j=r.length>0?r[0].maxCode+1:1,Re.current.value=j})).catch((function(e){console.log("error=",e),k(G("errormessageloannumber")),D(!1)}))}),[Ve]),(0,s.useEffect)((function(){D(!0),x.Z.get("".concat(b.v,"/linemancreate/get/lines")).then((function(e){ne(e.data),D(!1)})).catch((function(e){console.log("error=",e),k(G("errormessageline")),D(!1)}))}),[]),(0,s.useEffect)((function(){document.addEventListener("keydown",(function(e){if("Enter"===e.key&&"INPUT"===e.target.nodeName){var r=e.target.form,n=Array.prototype.indexOf.call(r,e.target);r.elements[n+1].focus(),e.preventDefault()}}))}),[]);var We=function(e){if(!1===e.currentTarget.checkValidity()&&e.stopPropagation(),Ee(!0),0===Number(se.current.value))return alert(G("paidamountvaluezeroalert")),!1;if(Number(se.current.value)>Number(ue.current.value))return alert(G("paidamountgreaterthanloanalert")),!1;if(""!==Ne.mySelectKey&&""!==Ce.current.value&&""!==ke.current.value&&Ge.current.value,""!==Le.current.value&&""!==Le.current.value&""!==M&&""!==Q&&0!==Q&&0!==se.current.value&&""!=se.current.value&&Number(se.current.value)==Number(ue.current.value))if(g){if(1==$e())return!1}else Xe()},$e=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.get("".concat(b.v,"/receipt/get"),{params:{loannumber:Number(De.current.value)}}).then((function(e){if(e.data.length>1)return alert(G("loanupdatealert")),!0;if(!0===Me){if(window.confirm(G("deletealertmessage")))return Ye(),!1}else if(window.confirm(G("yesornoalertmessage")))return Qe(),!1})).catch((function(e){console.log("error=",e),k(G("errormessagereceiptdetails"))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=function(){Ae(!0),x.Z.put("".concat(b.v,"/loancreate/update"),{newloanno:Number(Re.current.value),oldloanno:Number(De.current.value),customer_id:Ne.mySelectKey,lineman_id:Ce.current.value,city_id:Ze.current.value,weekno:ke.current.value,bookno:Ge.current.value,lineno:Le.current.value,document:Se.current.value,cheque:qe.current.value,weekcount:M,startdate:new Date(me),givendate:new Date(ce.current.value),duedate:new Date(oe.current.value),finisheddate:new Date(xe.current.value),givenamount:Number(Q),documentamount:Number(ae.current.value),interestamount:Number(te.current.value),totalamount:Number(le.current.value),dueamount:Number(ue.current.value),paidamount:Number(se.current.value)}).then((function(e){Ae(!1),er()})).catch((function(e){console.log("error=",e),k(G("errormessageupdateloan")),D(!1),Ae(!1)})),alert(G("updatealertmessage"))},Xe=function(){Ae(!0),x.Z.post("".concat(b.v,"/loancreate/save"),{loanno:Number(Re.current.value),customer_id:Ne.mySelectKey,lineman_id:Ce.current.value,city_id:Ze.current.value,weekno:ke.current.value,bookno:Ge.current.value,lineno:Le.current.value,document:Se.current.value,cheque:qe.current.value,weekcount:M,startdate:new Date(me),givendate:new Date(ce.current.value),duedate:new Date(oe.current.value),finisheddate:new Date(xe.current.value),givenamount:Number(Q),documentamount:Number(ae.current.value),interestamount:Number(te.current.value),totalamount:Number(le.current.value),dueamount:Number(ue.current.value),paidamount:Number(se.current.value)}).then((function(e){Ae(!1),er()})).catch((function(e){console.log("error=",e),k(G("errormessagesaveloan")),D(!1),Ae(!1)})),alert(G("savealertmessage"))},Ye=function(){x.Z.delete("".concat(b.v,"/loancreate/delete/").concat(Number(De.current.value))).then((function(e){alert(G("deletemessage")),Ue(!1),er()})).catch((function(e){console.log("error=",e),k(G("errormessagedeleteloan")),Ue(!1),D(!1),Ae(!1)}))};function er(){we(je),Ce.current.value="",A(""),be.current.value="",ve.current.value="",Ze.current.value="",pe.current.value="",fe.current.value="",Le.current.value="",ke.current.value="",Ge.current.value="",Se.current.value="",qe.current.value="",he((0,v.zJ)()),ce.current.value=(0,v.zJ)(),X(""),ae.current.value="",te.current.value="",le.current.value="",ue.current.value="",se.current.value="",De.current.value="",y(!1),Be((function(e){return!e}))}var rr=K.map((function(e,r){return{label:e.customer+"-"+e.fathername,value:e._id,key:r}}));return(0,f.jsx)(c.Z,{className:"rounded bg-white mt-5",children:(0,f.jsx)(o.Z,{className:"justify-content-md-center mt-5 ",children:(0,f.jsxs)(i.Z,{noValidate:!0,validated:Ke,onSubmit:We,children:[(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("loanno")})," ",(0,f.jsx)(i.Z.Control,{ref:Re,type:"number",required:!0})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("oldno")}),(0,f.jsx)(i.Z.Control,{ref:De,type:"number",placeholder:G("oldno"),onBlur:function(){""!=De.current.value&&x.Z.get("".concat(b.v,"/loancreate/get/oldLoanRef"),{params:{loanno:Number(De.current.value)}}).then((function(e){var r=e.data;we((0,l.Z)((0,l.Z)({},Ne),{},{mySelectKey:r[0].customer_id})),Ce.current.value=r[0].lineman_id,A(r[0].mobileno),be.current.value=r[0].fathername,ve.current.value=r[0].cityname,Ze.current.value=r[0].city,pe.current.value=r[0].address,fe.current.value=r[0].work,Le.current.value=r[0].lineno,ke.current.value=r[0].weekno,Ge.current.value=r[0].bookno,Se.current.value=r[0].document,qe.current.value=r[0].cheque,X(r[0].givenamount),ae.current.value=r[0].documentamount,te.current.value=r[0].interestamount,le.current.value=r[0].totalamount,ue.current.value=r[0].dueamount,se.current.value=r[0].paidamount,y(!0)}))}})]})}),(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"customername",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("customer")}),(0,f.jsx)(h.ZP,{"aria-label":"Default select example",required:!0,autoFocus:!0,value:rr.filter((function(e){return e.value===Ne.mySelectKey})),getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},onChange:function(e){return function(e){we((0,l.Z)((0,l.Z)({},Ne),{},{mySelectKey:e}));var r=K.filter((function(r){return r._id===e}));0==Ne.mySelectKey?(A(""),be.current.value="",ve.current.value="",Ze.current.value="",pe.current.value="",fe.current.value="",Le.current.value=0):(A(r[0].mobileno),be.current.value=r[0].fathername,ve.current.value=r[0].cityname,Ze.current.value=r[0].city_id,pe.current.value=r[0].address,fe.current.value=r[0].work,Le.current.value=r[0].lineno)}(e.value)},options:rr,placeholder:G("customer")})]})}),(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"linemanname",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("lineman")}),(0,f.jsxs)(i.Z.Select,{"aria-label":"Default select example",ref:Ce,required:!0,children:[(0,f.jsx)("option",{value:"",children:G("linemanplaceholder")}),V.map((function(e){return(0,f.jsx)("option",{value:e._id,children:e.linemanname})}))]})]})})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"mobilenumber",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("phoneno")})," ",(0,f.jsx)(i.Z.Control,{type:"number",disabled:!0,value:T,onChange:function(e){return A(e.target.value)}})]})}),(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"fathername",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("fathername")}),(0,f.jsx)(i.Z.Control,{ref:be,type:"text",disabled:!0})]})}),(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"cityname",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("city")})," ",(0,f.jsx)(i.Z.Control,{ref:ve,type:"text",disabled:!0})]})}),(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"d-none",name:"cityname",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("city")})," ",(0,f.jsx)(i.Z.Control,{ref:Ze,type:"text"})]})})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"address1",border:"primary",children:[(0,f.jsxs)(i.Z.Label,{children:[G("address")," "]}),(0,f.jsx)(i.Z.Control,{ref:pe,type:"text",disabled:!0})]})}),(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"work",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("work")}),(0,f.jsx)(i.Z.Control,{ref:fe,type:"text",disabled:!0})]})}),(0,f.jsx)(d.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"lineno",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("line")}),(0,f.jsxs)(i.Z.Select,{"aria-label":"Default select example",ref:Le,required:!0,children:[(0,f.jsx)("option",{value:"",children:G("citylineplaceholder")}),re.map((function(e){return(0,f.jsx)("option",{value:e.lineno,children:e.linename})}))]})]})})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"weekno",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("weekno")}),(0,f.jsx)(i.Z.Control,{type:"number",placeholder:G("weeknoplaceholder"),required:!0,ref:ke})]})}),(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"bookno",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("bookno")}),(0,f.jsx)(i.Z.Control,{type:"number",placeholder:G("booknoplaceholder"),required:!0,ref:Ge})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"doument",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("document")}),(0,f.jsx)(i.Z.Control,{type:"text",placeholder:G("document"),ref:Se})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"cheque",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("cheque")}),(0,f.jsx)(i.Z.Control,{type:"number",placeholder:G("cheque"),ref:qe})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"bookno",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("week")}),(0,f.jsx)(i.Z.Control,{className:"bg-info text-center",size:"lg",type:"number",placeholder:"How Many Weeks",required:!0,value:M,onChange:function(e){return U(e.target.value)}})]})})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"startdate",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("startdatedetail")}),(0,f.jsx)(i.Z.Control,{type:"date",required:!0,value:me,onChange:function(e){return he(e.target.value)},onBlur:e})]})}),(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"givendate",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("givendatedetail")}),(0,f.jsx)(i.Z.Control,{type:"date",ref:ce,required:!0,defaultValue:(0,v.zJ)()})]})}),(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"givendate",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("payingdate")}),(0,f.jsx)(i.Z.Control,{type:"date",ref:oe,required:!0,defaultValue:(0,v.zJ)()})]})}),(0,f.jsx)(d.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("enddatedetail")}),(0,f.jsx)(i.Z.Control,{type:"date",ref:xe,required:!0,value:e()})]})})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"givenmoney",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("givenamountdetail")}),(0,f.jsx)(i.Z.Control,{className:"text-end",type:"number",value:Q,required:!0,onChange:function(e){return X(Number(e.target.value))},onBlur:function(){var e=Number(Q),r=0;25==M?r=50*e/1e3:32==M?r=40*e/1e3:12==M?r=100*e/1e3:42!=M&&43!=M||(r=30*e/1e3),ae.current.value=r.toFixed(2);var n=0;25==M?n=20*e/100:32==M?n=24*e/100:42==M?n=23*e/100:12==M?n=10*e/100:43==M&&(n=26*e/100),te.current.value=n.toFixed(2);var a=e+r+n;le.current.value=a.toFixed(2);var t=a/M;ue.current.value=t.toFixed(2),X(e.toFixed(2))}})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"documentcharge",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("documentchargedetail")}),(0,f.jsx)(i.Z.Control,{ref:ae,className:"text-end",type:"text",required:!0})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"interest",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("interest")}),(0,f.jsx)(i.Z.Control,{className:"text-end",type:"text",required:!0,ref:te})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"totalamount",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("total")}),(0,f.jsx)(i.Z.Control,{className:"text-end",type:"text",required:!0,ref:le})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"dueamount",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("due")}),(0,f.jsx)(i.Z.Control,{className:"text-end",type:"text",required:!0,ref:ue})]})}),(0,f.jsx)(d.Z,{xs:12,md:2,className:"rounded bg-white",children:(0,f.jsxs)(i.Z.Group,{className:"mb-3",name:"paidamount",border:"primary",children:[(0,f.jsx)(i.Z.Label,{children:G("paidamountdetail")}),(0,f.jsx)(i.Z.Control,{className:"text-end",type:"text",required:!0,ref:se})]})})]}),(0,f.jsx)(o.Z,{children:(0,f.jsxs)("div",{className:"col-md-12 text-center mb-2 ",children:[(0,f.jsx)(m.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:We,disabled:Te,children:G(g?"updatebutton":"savebutton")})," ",(0,f.jsx)(m.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:function(){if(Ue(!0),1==$e())return!1},disabled:!g,children:G("deletebutton")})," ",(0,f.jsx)(m.Z,{variant:"primary",size:"lg",type:"button",className:"text-center",onClick:er,children:G("newbutton")})]})}),(0,f.jsxs)(o.Z,{children:[R?(0,f.jsx)(p.Z,{}):null,C&&(0,f.jsx)("div",{className:"error",children:C})]})]})})})}}}]);
//# sourceMappingURL=998.062befe8.chunk.js.map