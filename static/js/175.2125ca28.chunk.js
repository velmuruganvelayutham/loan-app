"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[175],{6868:function(e,n,t){t.d(n,{sp:function(){return c},vc:function(){return r},zJ:function(){return a}});t(2791);function a(){var e=new Date,n=e.getDay();0==n&&(n=7);var t=7-n-7+1,a=new Date(e.setDate(e.getDate()+t));return new Date(a).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")}function r(e){return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("-")}function c(e){return new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").join("-")}},7175:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var a=t(9439),r=t(2791),c=t(7022),i=t(9743),s=t(3855),l=t(2677),o=t(3360),u=t(1243),d=t(2073),m=t(3433),h=t(4942),x=t(1413),f=(t(7632),t(2591)),p=t(8116),j=t(184),Z=function(e){var n=e.pending,t=e.setpendingLoanFun,c=(0,r.useState)(1),i=(0,a.Z)(c,2),s=i[0],l=i[1],o=(0,r.useState)(!1),u=(0,a.Z)(o,2),d=(u[0],u[1],(0,r.useState)([])),Z=(0,a.Z)(d,2),g=Z[0],b=Z[1];(0,r.useEffect)((function(){b(n)}),[n]);var v=10*s,k=v-10,y=n.slice(k,v),N=Math.ceil(Object.keys(n).length/10),S=(0,m.Z)(Array(N+1).keys()).slice(1);var D=(0,r.useState)([]),C=(0,a.Z)(D,2),w=C[0],L=C[1],G=(0,r.useState)({weak:"",amount:0}),_=(0,a.Z)(G,2),z=_[0],A=_[1],B=function(e,a){var r=e.target,c=r.name,i=r.value,s=n.map((function(e){return e.loannumber===a&&c?(0,x.Z)((0,x.Z)({},e),{},(0,h.Z)({},c,i)):e}));A(s);var l=g.map((function(e){return e.loannumber==a?(0,x.Z)((0,x.Z)({},e),{},(0,h.Z)({},c,i)):e}));b(l),t(l)};return console.log(g),(0,j.jsx)(r.Fragment,{children:(0,j.jsxs)("div",{className:"container-fluid ",children:[(0,j.jsxs)(f.Z,{className:"table table-striped table-primary table-hover text-center fs-6 table-bordered border-dark  ",size:"sm",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{scope:"col",lg:1,className:"col-sm-12 col-md-1",children:(0,j.jsx)("input",{type:"checkbox",onClick:function(e){if(e.target.checked){var a=n.map((function(e){return e.loannumber}));L(a)}else L([]);var r=g.map((function(n){return(0,x.Z)((0,x.Z)({},n),{},(0,h.Z)({},"check",e.target.checked))}));b(r),t(g)}})}),(0,j.jsx)("th",{className:"col-sm-12 col-md-1",children:"Loan"}),(0,j.jsx)("th",{className:"col-sm-12 col-md-2",children:"Week No"}),(0,j.jsx)("th",{className:"col-sm-12 col-md-4",children:"Customer"}),(0,j.jsx)("th",{className:"col-sm-12 col-md-2 text-end",children:"Due"}),(0,j.jsx)("th",{className:"col-sm-12 col-md-2 text-end",children:"Amount"})]})}),(0,j.jsx)("tbody",{children:y&&y.length>0?y.map((function(e,n){return 1,(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"checkbox",children:(0,j.jsx)("input",{name:"check",type:"checkbox",checked:w.includes(e.loannumber),value:e.loannumber,onChange:function(n){return function(e,n){var a=e.target.checked,r=parseInt(e.target.value);a?L([].concat((0,m.Z)(w),[r])):(b((0,x.Z)((0,x.Z)({},g),{},(0,h.Z)({},e.target.name,!1))),L((function(e){return e.filter((function(e){return e!==r}))})));var c=g.map((function(t){return t.loannumber==n?(0,x.Z)((0,x.Z)({},t),{},(0,h.Z)({},e.target.name,e.target.checked)):t}));b(c),t(g)}(n,e.loannumber)}})},w.includes(e.loannumber)),(0,j.jsx)("td",{children:e.loannumber}),(0,j.jsx)("td",{children:(0,j.jsx)("input",{className:"form-control",name:"weak",value:z.weak,type:"number",onChange:function(n){return B(n,e.loannumber)},disabled:!w.includes(e.loannumber)})}),(0,j.jsx)("td",{children:e._id.customer}),(0,j.jsx)("td",{className:"text-end",children:e._id.dueamount}),(0,j.jsx)("td",{children:(0,j.jsx)("input",{className:"form-control text-end",name:"amount",value:z.amount,type:"number",onChange:function(n){return B(n,e.loannumber)},disabled:!w.includes(e.loannumber)})})]},e.loannumber)})):"No Data Available"})]}),(0,j.jsx)("nav",{children:(0,j.jsxs)(p.Z,{children:[(0,j.jsx)(p.Z.Prev,{children:(0,j.jsx)("a",{href:"#",className:"page-link",onClick:function(){s!==k&&l(s-1)},children:"Prev"})}),S.map((function(e,n){return(0,j.jsx)(p.Z.Item,{children:(0,j.jsx)("a",{href:"#",className:"page-link",onClick:function(){l(e)},children:e})})})),(0,j.jsx)(p.Z.Next,{children:(0,j.jsx)("a",{href:"#",className:"page-link",onClick:function(){s!==v&&(v,l(s+1))},children:"Next"})})]})})]})})},g=t(6868);var b=function(){var e=(0,r.useState)([]),n=(0,a.Z)(e,2),t=n[0],m=n[1],h=(0,r.useState)([]),x=(0,a.Z)(h,2),f=x[0],p=x[1],b=(0,r.useState)([]),v=(0,a.Z)(b,2),k=v[0],y=v[1],N=(0,r.useState)((0,g.zJ)()),S=(0,a.Z)(N,2),D=S[0],C=S[1],w=(0,r.useState)(0),L=(0,a.Z)(w,2),G=L[0],_=L[1],z=(0,r.useState)(!1),A=(0,a.Z)(z,2),B=A[0],E=A[1];return(0,r.useRef)(null),(0,r.useEffect)((function(){u.Z.get("".concat(d.v,"/citycreate/get")).then((function(e){m(e.data)}))}),[B]),(0,r.useEffect)((function(){u.Z.get("".concat(d.v,"/receipt/get/loanpending"),{params:{cityid:G.toString(),receiptdate:(0,g.vc)(D).toString()}}).then((function(e){p(e.data)}))}),[G,B]),(0,j.jsx)(c.Z,{children:(0,j.jsx)(i.Z,{className:"justify-content-md-center mt-5 ",children:(0,j.jsxs)(s.Z,{children:[(0,j.jsxs)(i.Z,{children:[(0,j.jsx)(l.Z,{xs:6,md:4,className:"rounded bg-white",children:(0,j.jsxs)(s.Z.Group,{className:"mb-3",name:"lineno",border:"primary",children:[(0,j.jsx)(s.Z.Label,{children:"Line No"}),(0,j.jsxs)(s.Z.Select,{"aria-label":"Default select example",onChange:function(e){return _(e.target.value)},value:G,children:[(0,j.jsx)("option",{value:0,children:" select Line"}),t.map((function(e){return(0,j.jsx)("option",{value:e._id,children:e.cityname})}))]})]})}),(0,j.jsx)(l.Z,{xs:12,md:1}),(0,j.jsx)(l.Z,{xs:12,md:4,className:"rounded bg-white",children:(0,j.jsxs)(s.Z.Group,{className:"mb-3",name:"startdate",border:"primary",children:[(0,j.jsx)(s.Z.Label,{children:"Date"}),(0,j.jsx)(s.Z.Control,{type:"date",placeholder:"loan start date",value:D,onChange:function(e){return C(e.target.value)}})]})})]}),(0,j.jsxs)(i.Z,{children:[(0,j.jsx)("div",{className:"col-md-12 text-center ",children:(0,j.jsx)(o.Z,{variant:"primary",type:"button",className:"text-center",onClick:function(){u.Z.post("".concat(d.v,"/receipt/save/details"),{receiptdata:k,receiptdate:new Date(D)}).then((function(e){})).then((function(e){C(g.zJ),E((function(e){return!e}))})),alert("Collection Added Successfully")},children:"Save"})}),(0,j.jsx)("ul",{children:(0,j.jsx)(Z,{pending:f,setpendingLoanFun:y})})]})]})})})}},2073:function(e,n,t){t.d(n,{v:function(){return a}});var a="https://loan-app-backend-77d2e30338cf.herokuapp.com"}}]);
//# sourceMappingURL=175.2125ca28.chunk.js.map