"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[175],{7175:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var r=t(9439),a=t(2791),c=t(7022),s=t(9743),l=t(3855),o=t(2677),i=t(3360),u=t(1243),d=t(2073),m=t(4942),h=t(1413),x=t(3433),p=(t(7632),t(2591)),f=t(8116),j=t(9230),Z=t(184),g=function(e){var n=e.pending,t=e.setpendingLoanFun,c=(0,a.useState)(1),s=(0,r.Z)(c,2),l=s[0],o=s[1],i=(0,j.$G)(),u=i.t,d=(i.i18n,20*l),g=d-20,b=n.slice(g,d),v=Math.ceil(Object.keys(n).length/20),k=(0,x.Z)(Array(v+1).keys()).slice(1);var N=(0,a.useState)([]),y=(0,r.Z)(N,2),S=y[0],w=y[1],C=(0,a.useState)({weak:"",amount:0}),_=(0,r.Z)(C,2),L=_[0],D=_[1],E=function(e,r){var a=e.target,c=a.name,s=a.value,l=n.map((function(e){return e.loannumber===r&&c?(0,h.Z)((0,h.Z)({},e),{},(0,m.Z)({},c,s)):e}));D(l);var o=n.map((function(e){return e.loannumber===r?(0,h.Z)((0,h.Z)({},e),{},(0,m.Z)({},c,s)):e}));t(o)};return(0,Z.jsx)(a.Fragment,{children:(0,Z.jsxs)("div",{className:"container-fluid ",children:[(0,Z.jsxs)(p.Z,{className:"table table-striped table-primary table-hover text-center  table-bordered border-dark",size:"sm",children:[(0,Z.jsx)("thead",{children:(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("th",{scope:"col",lg:1,className:"col-sm-12 col-md-1",children:(0,Z.jsx)("input",{type:"checkbox",onClick:function(e){if(e.target.checked){var r=n.map((function(e){return e.loannumber}));w(r)}else w([]);var a=n.map((function(n){return(0,h.Z)((0,h.Z)({},n),{},{check:e.target.checked})}));t(a)}})}),(0,Z.jsx)("th",{className:"col-sm-12 col-md-1",children:u("loanno")}),(0,Z.jsx)("th",{className:"col-sm-12 col-md-1",children:u("weekno")}),(0,Z.jsx)("th",{className:"col-sm-12 col-md-4",children:u("customer")}),(0,Z.jsx)("th",{className:"col-sm-12 col-md-1",children:u("loanamount")}),(0,Z.jsx)("th",{className:"col-sm-12 col-md-1",children:u("due")}),(0,Z.jsx)("th",{className:"col-sm-12 col-md-1 text-end",children:u("amount")})]})}),(0,Z.jsx)("tbody",{children:b&&b.length>0?b.map((function(e,r){return 1,(0,Z.jsxs)("tr",{children:[(0,Z.jsx)("td",{className:"checkbox",children:(0,Z.jsx)("input",{name:"check",type:"checkbox",checked:S.includes(e.loannumber),value:e.loannumber,onChange:function(r){return function(e,r){var a=e.target.checked,c=parseInt(e.target.value);a?w([].concat((0,x.Z)(S),[c])):(t((0,h.Z)((0,h.Z)({},n),{},(0,m.Z)({},e.target.name,!1))),w((function(e){return e.filter((function(e){return e!==c}))})));var s=n.map((function(n){return n.loannumber===r?(0,h.Z)((0,h.Z)({},n),{},(0,m.Z)({},e.target.name,e.target.checked)):n}));t(s)}(r,e.loannumber)}})},S.includes(e.loannumber)),(0,Z.jsx)("td",{children:e.loannumber}),(0,Z.jsx)("td",{children:(0,Z.jsx)("input",{className:"form-control",name:"weak",value:L.weak,type:"number",onChange:function(n){return E(n,e.loannumber)},disabled:!S.includes(e.loannumber)})}),(0,Z.jsx)("td",{children:e._id.customer}),(0,Z.jsx)("td",{className:"text-end",children:e.pending}),(0,Z.jsx)("td",{className:"text-end",children:e._id.dueamount}),(0,Z.jsx)("td",{children:(0,Z.jsx)("input",{className:"form-control text-end",name:"amount",value:L.amount,type:"number",onChange:function(n){return E(n,e.loannumber)},disabled:!S.includes(e.loannumber)})})]},e.loannumber)})):u("nodatas")})]}),(0,Z.jsx)("nav",{children:(0,Z.jsxs)(f.Z,{children:[(0,Z.jsx)(f.Z.Prev,{children:(0,Z.jsx)("a",{href:"#",className:"page-link",onClick:function(){l!==g&&o(l-1)},children:u("pageprev")})}),k.map((function(e,n){return(0,Z.jsx)(f.Z.Item,{children:(0,Z.jsx)("a",{href:"#",className:"page-link",onClick:function(){o(e)},children:e})})})),(0,Z.jsx)(f.Z.Next,{children:(0,Z.jsx)("a",{href:"#",className:"page-link",onClick:function(){l!==d&&(d,o(l+1))},children:u("pagenext")})})]})})]})})},b=t(6868),v=t(5691);var k=function(){var e=(0,a.useState)([]),n=(0,r.Z)(e,2),t=n[0],m=n[1],h=(0,a.useState)([]),x=(0,r.Z)(h,2),p=x[0],f=x[1],k=(0,a.useState)((0,b.zJ)()),N=(0,r.Z)(k,2),y=N[0],S=N[1],w=(0,a.useState)(0),C=(0,r.Z)(w,2),_=C[0],L=C[1],D=(0,j.$G)(),E=D.t,G=(D.i18n,(0,a.useState)(!1)),F=(0,r.Z)(G,2),I=F[0],P=F[1],z=(0,a.useState)(""),A=(0,r.Z)(z,2),O=A[0],$=A[1],J=(0,a.useState)(!1),M=(0,r.Z)(J,2),R=M[0],T=M[1],U=(0,a.useState)([]),V=(0,r.Z)(U,2),q=V[0],B=V[1],H=(0,a.useState)(!1),K=(0,r.Z)(H,2),Q=K[0],W=K[1],X=(0,a.useRef)("");(0,a.useEffect)((function(){P(!0),u.Z.get("".concat(d.v,"/citycreate/get")).then((function(e){m(e.data),P(!1)})).catch((function(e){console.log("error=",e),$(E("errormessagecity")),P(!1)}))}),[]),(0,a.useEffect)((function(){P(!0),u.Z.get("".concat(d.v,"/receipt1/get/reference")).then((function(e){X.current.value=e.data[0].receiptreference+(e.data[0].receiptcode+1),B(e.data),P(!1)})).catch((function(e){console.log("error=",e),$(E("errormessagecustomer")),P(!1)}))}),[Q]),(0,a.useEffect)((function(){document.addEventListener("keydown",(function(e){if("Enter"===e.key&&"INPUT"===e.target.nodeName){var n=e.target.form,t=Array.prototype.indexOf.call(n,e.target);n.elements[t+1].focus(),e.preventDefault()}}))}),[]);var Y=function(){return P(!0),u.Z.get("".concat(d.v,"/receipt/get/loanpending"),{params:{cityid:_.toString(),receiptdate:(0,b.vc)(y).toString()}}).then((function(e){f(e.data),P(!1)})).catch((function(e){console.log("error=",e),$(E("errormessageloan")),P(!1)}))},ee=(0,Z.jsx)("div",{className:"col-md-12 text-center",children:(0,Z.jsx)(g,{pending:p,setpendingLoanFun:f})});return(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(s.Z,{className:"justify-content-md-center mt-5 ",children:(0,Z.jsxs)(l.Z,{children:[(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{xs:6,md:4,className:"rounded bg-white",children:(0,Z.jsxs)(l.Z.Group,{className:"mb-3",name:"lineno",border:"primary",children:[(0,Z.jsx)(l.Z.Label,{children:E("line")}),(0,Z.jsxs)(l.Z.Select,{"aria-label":"Default select example",onChange:function(e){return L(e.target.value)},value:_,children:[(0,Z.jsxs)("option",{value:0,children:[" ",E("lineplaceholder")]}),t.map((function(e){return(0,Z.jsx)("option",{value:e._id,children:e.cityname})}))]})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(l.Z.Group,{className:"mb-3",name:"startdate",border:"primary",children:[(0,Z.jsx)(l.Z.Label,{children:E("receiptno")}),(0,Z.jsx)(l.Z.Control,{type:"text",ref:X,defaultValue:""})]})}),(0,Z.jsx)(o.Z,{xs:12,md:3,className:"rounded bg-white",children:(0,Z.jsxs)(l.Z.Group,{className:"mb-3",name:"startdate",border:"primary",children:[(0,Z.jsx)(l.Z.Label,{children:E("date")}),(0,Z.jsx)(l.Z.Control,{type:"date",placeholder:"loan start date",value:y,onChange:function(e){return S(e.target.value)}})]})}),(0,Z.jsx)(o.Z,{xs:12,md:1})]}),(0,Z.jsx)(s.Z,{children:(0,Z.jsxs)("div",{className:"col-md-12 text-center ",children:[(0,Z.jsx)(i.Z,{variant:"primary",type:"button",className:"text-center",onClick:Y,children:E("processbuttonlabel")})," "]})}),(0,Z.jsxs)(s.Z,{children:[I?(0,Z.jsx)(v.Z,{}):ee,O&&(0,Z.jsx)("div",{className:"error",children:O})]}),(0,Z.jsxs)(s.Z,{children:[(0,Z.jsx)(o.Z,{}),(0,Z.jsx)(o.Z,{className:"col-md-3",children:(0,Z.jsx)(i.Z,{variant:"primary",type:"button",className:"text-center",onClick:function(){var e=0;if(p.find((function(n){return console.log(n.check),console.log(n.weak),console.log(n.amount),!0===n.check&&(""!=n.weak&&n.amount>0?(e=1,!0):(e=0,!0))})))if(1===e){var n=p.map((function(e){if(e.check)return{receiptnumber:X.current.value.toString(),loannumber:e.loannumber,receiptdate:new Date(y),customer_id:e._id.customer_id,weekno:e.weak,collectedamount:e.amount}}));T(!0),u.Z.post("".concat(d.v,"/receipt/save/details"),{items:n,receiptnumber:X.current.value.toString(),receiptcode:Number(q[0].receiptcode)+1,receiptdate:new Date(y)}).then((function(e){})).then((function(e){f([]),T(!1),Y(),W((function(e){return!e})),alert(E("savealertmessage"))})).catch((function(e){console.log("error=",e),$(E("errormessagesavereceipt")),T(!1)}))}else alert("Properly Fill the Details");else alert(E("selectanyitemfromlist"))},disabled:R,children:E("savebutton")})}),(0,Z.jsx)(o.Z,{})]})]})})})}}}]);
//# sourceMappingURL=175.fda300f3.chunk.js.map